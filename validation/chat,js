const Validator = require('validator');
const isEmpty = require('./is-empty');

module.exports = function validateChatInput(data) {
    let errors = {};


    data.creator = !isEmpty(data.creator) ? data.creator : '';
    data.course = !isEmpty(data.course) ? data.course : '';

    if(Validator.isEmpty(data.course)) {
        errors.creator = 'Creator ID is required';
    }

    if(Validator.isEmpty(data.course)) {
        errors.course = 'Course ID is required';
    }

    if(data.messages.length < 1){
        errors.messages = 'A Message is required';
    }

    if(data.messages.length > 0){
        data.messages.forEach(element => {
            if(Validator.isEmpty(element.role)) {
                errors.course = 'Course ID is required';
            }
            if(Validator.isEmpty(element.content)) {
                errors.course = 'Course ID is required';
            }
        });
    }

    return {
        errors,
        isValid: isEmpty(errors)
    }
}